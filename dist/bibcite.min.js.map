{"version":3,"sources":["../src/parse-bibtex.js","../src/bibcite.js"],"names":["BibtexParser","this","pos","input","entries","comments","strings","JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC","currentKey","currentEntry","setInput","t","getEntries","isWhitespace","s","match","skipWhitespace","substring","length","tryMatch","value_braces","bracecount","start","end","value_quotes","single_value","k","key","toUpperCase","value","values","push","join","key_equals_value","val","key_value_list","kv","entry_body","d","entryType","directive","string","preamble","comment","entry","bibtex","doParse","b","textohtml","tex","textohtml_map","hasOwnProperty","replace","replace_html","rx","target","matches","$","filter","test","text","each","html","\\\"u","\\\"a","\\\"o","\\'e","\\'a","\\\"U","\\\"A","\\\"O","\\'E","\\'A","\\\"{u}","\\\"{a}","\\\"{o}","\\'{e}","\\'{a}","\\\"{U}","\\\"{A}","\\\"{O}","\\'{E}","\\'{A}","\\&","referenceCounts","referenceCount","citation","id","parseAuthor","authorString","authors","split","map","author","obj","full","parts","lastName","firstName","middleNames","slice","initials","_","name","formatAuthors","all","undefined","templates","fullArticle","template","citep","citet","fnSelector","fnCounter","fullReference","before","after","$wrapper","append","fullcite","count","content","year","footcite","ref","title","journal","volume","number","pages","updateReference","citation_id","expr","RegExp","newHtml","type","beforeAfter","fn","get","bibtext","bibs","i","el","$el","$content","$tip","empty","prepend","$ref","attr","on","e","preventDefault","href","active","hasClass","removeClass","data","setTimeout","$this","addClass","clearTimeout","$beginProbe","insertBefore","beginPos","position","$endProbe","insertAfter","endPos","remove","top","refWidth","left","refLeft","refTop","height","width","totalWidth","contentWidth","targetLeft","Math","max","css","find","refCenter","targetCenter"],"mappings":"AAsBA,QAASA,gBACPC,KAAKC,IAAM,EACXD,KAAKE,MAAQ,GAEbF,KAAKG,WACLH,KAAKI,YACLJ,KAAKK,SACDC,IAAK,UACLC,IAAK,WACLC,IAAK,QACLC,IAAK,QACLC,IAAK,MACLC,IAAK,OACLC,IAAK,OACLC,IAAK,SACLC,IAAK,YACLC,IAAK,UACLC,IAAK,WACLC,IAAK,YAETjB,KAAKkB,WAAa,GAClBlB,KAAKmB,aAAe,GAGpBnB,KAAKoB,SAAW,SAASC,GACvBrB,KAAKE,MAAQmB,GAGfrB,KAAKsB,WAAa,WACd,MAAOtB,MAAKG,SAGhBH,KAAKuB,aAAe,SAASC,GAC3B,MAAa,KAALA,GAAiB,MAALA,GAAkB,MAALA,GAAkB,MAALA,GAGhDxB,KAAKyB,MAAQ,SAASD,GAEpB,GADAxB,KAAK0B,iBACD1B,KAAKE,MAAMyB,UAAU3B,KAAKC,IAAKD,KAAKC,IAAIuB,EAAEI,SAAWJ,EAGvD,KAAM,4BAA8BA,EAAI,WAAaxB,KAAKE,MAAMyB,UAAU3B,KAAKC,IAF/ED,MAAKC,KAAOuB,EAAEI,OAIhB5B,KAAK0B,kBAGP1B,KAAK6B,SAAW,SAASL,GAEvB,MADAxB,MAAK0B,iBACD1B,KAAKE,MAAMyB,UAAU3B,KAAKC,IAAKD,KAAKC,IAAIuB,EAAEI,SAAWJ,GAQ3DxB,KAAK0B,eAAiB,WACpB,KAAO1B,KAAKuB,aAAavB,KAAKE,MAAMF,KAAKC,OACvCD,KAAKC,KAEP,IAA4B,KAAxBD,KAAKE,MAAMF,KAAKC,KAAa,CAC/B,KAA8B,MAAxBD,KAAKE,MAAMF,KAAKC,MACpBD,KAAKC,KAEPD,MAAK0B,mBAIT1B,KAAK8B,aAAe,WAClB,GAAIC,GAAa,CACjB/B,MAAKyB,MAAM,IAEX,KADA,GAAIO,GAAQhC,KAAKC,MACL,CACV,GAA4B,KAAxBD,KAAKE,MAAMF,KAAKC,MAAyC,MAA1BD,KAAKE,MAAMF,KAAKC,IAAI,GAAY,CACjE,KAAI8B,EAAa,GAEV,CACL,GAAIE,GAAMjC,KAAKC,GAEf,OADAD,MAAKyB,MAAM,KACJzB,KAAKE,MAAMyB,UAAUK,EAAOC,GAJnCF,QAMG,IAA4B,KAAxB/B,KAAKE,MAAMF,KAAKC,KACzB8B,QACK,IAAI/B,KAAKC,KAAOD,KAAKE,MAAM0B,OAAO,EACvC,KAAM,oBAER5B,MAAKC,QAITD,KAAKkC,aAAe,WAClBlC,KAAKyB,MAAM,IAEX,KADA,GAAIO,GAAQhC,KAAKC,MACL,CACV,GAA4B,KAAxBD,KAAKE,MAAMF,KAAKC,MAAyC,MAA1BD,KAAKE,MAAMF,KAAKC,IAAI,GAAY,CAC/D,GAAIgC,GAAMjC,KAAKC,GAEf,OADAD,MAAKyB,MAAM,KACJzB,KAAKE,MAAMyB,UAAUK,EAAOC,GAChC,GAAIjC,KAAKC,KAAOD,KAAKE,MAAM0B,OAAO,EACvC,KAAM,sBAAwB5B,KAAKE,MAAMyB,UAAUK,EAErDhC,MAAKC,QAITD,KAAKmC,aAAe,WAClB,GAAIH,GAAQhC,KAAKC,GACjB,IAAID,KAAK6B,SAAS,KAChB,MAAO7B,MAAK8B,cACP,IAAI9B,KAAK6B,SAAS,KACvB,MAAO7B,MAAKkC,cAEZ,IAAIE,GAAIpC,KAAKqC,KACb,IAAIrC,KAAKK,QAAQ+B,EAAEE,eACjB,MAAOtC,MAAKK,QAAQ+B,EACf,IAAIA,EAAEX,MAAM,YACjB,MAAOW,EAEP,MAAM,kBAAoBpC,KAAKE,MAAMyB,UAAUK,IAKrDhC,KAAKuC,MAAQ,WACX,GAAIC,KAEJ,KADAA,EAAOC,KAAKzC,KAAKmC,gBACVnC,KAAK6B,SAAS,MACnB7B,KAAKyB,MAAM,KACXe,EAAOC,KAAKzC,KAAKmC,eAEnB,OAAOK,GAAOE,KAAK,KAGrB1C,KAAKqC,IAAM,WAET,IADA,GAAIL,GAAQhC,KAAKC,MACL,CACV,GAAID,KAAKC,KAAOD,KAAKE,MAAM0B,OACzB,KAAM,aAGR,KAAI5B,KAAKE,MAAMF,KAAKC,KAAKwB,MAAM,sBAG7B,MAAOzB,MAAKE,MAAMyB,UAAUK,EAAOhC,KAAKC,KAAKqC,aAF7CtC,MAAKC,QAOXD,KAAK2C,iBAAmB,WACtB,GAAIN,GAAMrC,KAAKqC,KACf,IAAIrC,KAAK6B,SAAS,KAAM,CACtB7B,KAAKyB,MAAM,IACX,IAAImB,GAAM5C,KAAKuC,OACf,QAASF,EAAKO,GAEd,KAAM,6CAA+C5C,KAAKE,MAAMyB,UAAU3B,KAAKC,MAInFD,KAAK6C,eAAiB,WACpB,GAAIC,GAAK9C,KAAK2C,kBAEd,KADA3C,KAAKG,QAAQH,KAAKmB,cAAc2B,EAAG,IAAMA,EAAG,GACrC9C,KAAK6B,SAAS,OACnB7B,KAAKyB,MAAM,MAEPzB,KAAK6B,SAAS,OAGlBiB,EAAK9C,KAAK2C,mBACV3C,KAAKG,QAAQH,KAAKmB,cAAc2B,EAAG,IAAMA,EAAG,IAIhD9C,KAAK+C,WAAa,SAASC,GACzBhD,KAAKmB,aAAenB,KAAKqC,MACzBrC,KAAKG,QAAQH,KAAKmB,eAAkB8B,UAAWD,EAAErB,UAAU,IAC3D3B,KAAKyB,MAAM,KACXzB,KAAK6C,kBAGP7C,KAAKkD,UAAY,WAEf,MADAlD,MAAKyB,MAAM,KACJ,IAAIzB,KAAKqC,OAGlBrC,KAAKmD,OAAS,WACZ,GAAIL,GAAK9C,KAAK2C,kBACd3C,MAAKK,QAAQyC,EAAG,GAAGR,eAAiBQ,EAAG,IAGzC9C,KAAKoD,SAAW,WACdpD,KAAKuC,SAGPvC,KAAKqD,QAAU,WAEb,IADA,GAAIrB,GAAQhC,KAAKC,MACL,CACV,GAAID,KAAKC,KAAOD,KAAKE,MAAM0B,OACzB,KAAM,iBAGR,IAA4B,KAAxB5B,KAAKE,MAAMF,KAAKC,KAIlB,WADAD,MAAKI,SAASqC,KAAKzC,KAAKE,MAAMyB,UAAUK,EAAOhC,KAAKC,KAFpDD,MAAKC,QAQXD,KAAKsD,MAAQ,SAASN,GACpBhD,KAAK+C,WAAWC,IAGlBhD,KAAKuD,OAAS,WACZ,KAAMvD,KAAK6B,SAAS,MAAM,CACxB,GAAImB,GAAIhD,KAAKkD,YAAYZ,aACzBtC,MAAKyB,MAAM,KACF,WAALuB,EACFhD,KAAKmD,SACS,aAALH,EACThD,KAAKoD,WACS,YAALJ,EACThD,KAAKqD,UAELrD,KAAKsD,MAAMN,GAEbhD,KAAKyB,MAAM,KAGbzB,KAAKG,QAAQ,aAAeH,KAAKI,UAKrC,QAASoD,SAAQtD,GACf,GAAIuD,GAAI,GAAI1D,aAGZ,OAFA0D,GAAErC,SAASlB,GACXuD,EAAEF,SACKE,EAAEtD,QC1OX,QAASuD,WAAUC,GACf,IAAK,GAAItB,KAAOuB,eACRA,cAAcC,eAAexB,KAC7BsB,EAAMA,EAAIG,QAAQ,IAAMzB,EAAM,IAAKuB,cAAcvB,IACjDsB,EAAMA,EAAIG,QAAQzB,EAAKuB,cAAcvB,IAG7C,OAAOsB,GAGX,QAASI,cAAaC,EAAIC,GACtB,GAAIC,GAAUC,EAAE,KAAKC,OAAO,WACxB,MAAOJ,GAAGK,KAAKF,EAAEnE,MAAMsE,SAG3BH,GAAEI,KAAKL,EAAS,WACZ,GAAIM,GAAOL,EAAEnE,MAAMwE,MACnBL,GAAEnE,MAAMwE,KAAKA,EAAKV,QAAQE,EAAIC,MAzCtC,GAAIL,gBACAa,OAAS,SACTC,OAAS,SACTC,OAAS,SACTC,OAAQ,WACRC,OAAQ,WACRC,OAAS,SACTC,OAAS,SACTC,OAAS,SACTC,OAAQ,WACRC,OAAQ,WACRC,SAAW,SACXC,SAAW,SACXC,SAAW,SACXC,SAAU,WACVC,SAAU,WACVC,SAAW,SACXC,SAAW,SACXC,SAAW,SACXC,SAAU,WACVC,SAAU,WACVC,MAAO,SAyBPC,mBACAC,eAAiB,SAASC,GAC5B,GAAIC,GAA0B,gBAAd,GAA0BD,EAAWA,EAAc,GAEnE,OADAF,iBAAgBG,IAAOH,gBAAgBG,IAAO,GAAK,EAC5CH,gBAAgBG,IAGrBC,YAAc,SAASC,GACzB,GAAIC,GAAUD,EAAaE,MAAM,QACjC,OAAOD,GAAQE,IAAI,SAASC,GAC1B,GAAIC,IAAQC,KAAMF,GACdG,EAAQH,EAAOF,MAAM,KAYzB,OAXAG,GAAIG,SAAWD,EAAM,GAErBA,EAAQA,EAAM,GAAGL,MAAM,KACvBG,EAAII,UAAYF,EAAM,GACtBF,EAAIK,YAAcH,EAAMI,MAAM,GAE9BN,EAAIO,UAAYP,EAAII,UAAU,IAC9BI,EAAER,EAAIK,aAAatC,KAAK,SAAS0C,GAC/BT,EAAIO,SAAStE,KAAKwE,EAAK,MAGlBT,KAIPU,cAAgB,SAASlB,EAAUmB,EAAKJ,GAChCK,QAAPD,IAAoBA,GAAM,GACdC,QAAZL,IAAyBA,GAAW,EAEvC,IAAIX,GAAUF,YAAYF,EAAiB,QAAGM,IAAI,SAASC,GACzD,MAAGQ,GACMR,EAAOI,SAAW,KAAOJ,EAAOQ,SAASrE,KAAK,MAAQ,IAEtD6D,EAAOI,UAIlB,OAAqB,IAAlBP,EAAQxE,OACFwE,EAAQ,GAGRA,EAAQxE,QAAU,GAAY,GAAPuF,GAAmC,GAAlBf,EAAQxE,OAChDwE,EAAQU,MAAM,EAAEV,EAAQxE,OAAO,GAAGc,KAAK,MAChC,MAAQ0D,EAAQA,EAAQxE,OAAO,GAItCwE,EAAQ,GAAK,WAIpBiB,WACFC,YAAaN,EAAEO,SAAS,8PAKxBC,MAAOR,EAAEO,SAAS,iJAGlBE,MAAOT,EAAEO,SAAS,iJAKhBG,WAAa,mBACbC,UAAY,EAEZC,cAAgB,SAAS3B,EAAID,EAAU6B,EAAQC,GACjD,GAAIC,GAAW5D,EAAE,YAAY8B,EAAG,qCAC3B+B,OAAO7D,EAAE,WAAWK,KAAKqD,IACzBG,OAAOC,SAASjC,IAChBgC,OAAO7D,EAAE,WAAWK,KAAKsD,GAC9B,OAAO3D,GAAE,SAAS6D,OAAOD,GAAUvD,QAGjCgD,MAAQ,SAASxB,EAAU6B,EAAQC,GACrC,GAAII,GAAQnC,eAAeC,EAC3B2B,YACA,IAAI1B,GAAK,YAAY0B,UACjBQ,EAAUd,UAAUG,OACtBpB,QAASc,cAAclB,EAAUkC,EAAQ,GAAK,GAAG,GACjDE,KAAMpC,EAAe,KACrBkC,MAAOA,EACPjC,GAAIA,EACJ4B,OAAQA,EACRC,MAAOA,GAET,OAAOK,GAAUP,cAAc3B,EAAID,IAGjCyB,MAAQ,SAASzB,EAAU6B,EAAQC,GACrC,GAAII,GAAQnC,eAAeC,EAC3B2B,YACA,IAAI1B,GAAK,YAAY0B,UACjBQ,EAAUd,UAAUI,OACtBrB,QAASc,cAAclB,EAAUkC,EAAQ,GAAK,GAAG,GACjDE,KAAMpC,EAAe,KACrBkC,MAAOA,EACPjC,GAAIA,EACJ4B,OAAQA,EACRC,MAAOA,GAET,OAAOK,GAAUP,cAAc3B,EAAID,IAGjCqC,SAAW,SAASrC,EAAU6B,EAAQC,GACxCH,WACA,IAAI1B,GAAK,YAAc0B,UACnBW,EAAM,mCAAmCrC,EAAG,oBAAsB0B,UAAW,YACjF,OAAOW,GAAMV,cAAc3B,EAAID,EAAU6B,EAAQC,IAG/CG,SAAW,SAASjC,EAAU6B,EAAQC,GACxC,MAAOT,WAAUC,aACflB,QAASc,cAAclB,GAAU,GAAM,GACvCoC,KAAMpC,EAAe,KACrBuC,MAAOvC,EAAgB,MAAEc,MAAM,EAAGd,EAAgB,MAAEpE,OAAO,GAC3D4G,QAASxC,EAAkB,QAC3ByC,OAAQzC,EAAiB,OACzB0C,OAAQ1C,EAAiB,OACzB2C,MAAO3C,EAAgB,MAAElC,QAAQ,KAAK,cAItC8E,gBAAkB,SAAS5C,EAAU6C,GAOvC,GAAIC,GAAO,GAAIC,QAAO,QAAUF,EAAa,KACzC3E,EAAUC,EAAE,KAAKC,OAAO,WACxB,MAAO0E,GAAKzE,KAAKF,EAAEnE,MAAMsE,UAGzBwE,EAAO,GAAIC,QAAO,QAAUF,EAAc,kBAAmB,KACjE1E,GAAEI,KAAKL,EAAS,WACZ,GAAIM,GAAOL,EAAEnE,MAAMwE,OACfwE,EAAUxE,EAAKV,QAAQgF,EAAM,SAASrH,EAAOwH,EAAMC,GACrD,GAAID,GAAaA,EACbpB,EAAS,GACTC,EAAQ,GACRqB,EAAK1B,KAWT,OATGyB,KACDA,EAAcA,EAAYpC,MAAM,EAAGoC,EAAYtH,OAAO,GAAGyE,MAAM,MAC/DwB,EAASqB,EAAY,GACrBpB,EAAQoB,EAAY,IAAM,IAGjB,KAARD,EAAeE,EAAK3B,MACP,KAARyB,EAAeE,EAAKd,SACZ,KAARY,IAAeE,EAAKlB,UACrBkB,EAAGnD,EAAU6B,EAAQC,IAG9B3D,GAAEnE,MAAMwE,KAAKd,UAAUsF,MAI7B7E,GAAE,WACEA,EAAEiF,IAAI,2BAA4B,SAASC,GACvClF,EAAE,WACE,GAAImF,GAAO9F,QAAQ6F,EACnBrC,GAAEsC,GAAM/E,KAAK,SAASyB,EAAU6C,GAC5B7C,EAAc,IAAI6C,EAClBD,gBAAgB5C,EAAU6C,KAG9B1E,EAAE,qBAAqBI,KAAK,SAASgF,EAAGC,GACtC,GAAIC,GAAMtF,EAAEqF,GACRE,EAAWvF,EAAE,+BAA+BK,KAAKiF,EAAIjF,QACrDmF,EAAQxF,EAAE,0BACdsF,GAAIG,QAAQ5B,OAAO0B,GAAUG,QAAQF,KAGvCxF,EAAE,iCAAiCmC,IAAI,SAASiD,EAAGC,GACjD,GAAIM,GAAO3F,EAAEqF,EACErF,GAAE2F,EAAKC,KAAK,QAE3BD,GAAKE,GAAG,QAAS,SAASC,GACxBA,EAAEC,gBACF,IAAIC,GAAOL,EAAKC,KAAK,QACjBL,EAAWvF,EAAEgG,GACbC,EAASV,EAASW,SAAS,SAE/B,IAAID,EAwDFV,EAASY,YAAY,WACrBZ,EAASa,KAAK,UAAWC,WAAW,WAClCd,EAASY,YAAY,WACpB,UA3DO,CACVnG,EAAE,4BAA4BI,KAAK,WACjC,GAAIkG,GAAQtG,EAAEnE,KACdyK,GAAMH,YAAY,WAClBG,EAAMF,KAAK,UAAWC,WAAW,WAC/BC,EAAMH,YAAY,WACjB,QAGLZ,EAASgB,SAAS,UAClBC,aAAajB,EAASa,KAAK,YAC3Bb,EAASa,KAAK,UAAWC,WAAW,WAClCd,EAASgB,SAAS,YACjB,IAIH,IAAIE,GAAczG,EAAE,OAAO0G,aAAaf,GAAMY,SAAS,SACnDI,EAAWF,EAAYG,WACvBC,EAAY7G,EAAE,OAAO8G,YAAYnB,GAAMY,SAAS,SAChDQ,EAASF,EAAUD,UACvBC,GAAUG,SACVP,EAAYO,SAGRD,EAAOE,IAAMN,EAASM,IAAM,IAAON,EAASM,KAAO,GACrDC,SAAWH,EAAOI,KAClBC,QAAW,EACXC,OAASV,EAASM,IAAMtB,EAAK2B,WAE7BJ,SAAWvB,EAAK4B,QAChBH,QAAUT,EAASQ,KACnBE,OAASN,EAAOE,IAAMtB,EAAK2B,SAI7B,IAAIE,GAAaxH,EAAE,QAAQuH,QACvBE,EAAelC,EAASgC,OACzBH,SAAUI,EAAaC,EAAe,EAEvCC,WAAaF,EAAaC,GAG1BC,WAAaN,SAAWK,EAAeP,UAAY,EACnDQ,WAAaC,KAAKC,IAAI,EAAGF,aAE3BnC,EAASsC,KAAMV,KAAMO,WAAYT,IAAKI,QAGtC,IAAI7B,GAAOD,EAASuC,KAAK,QACrBC,EAAYX,QAAUF,SAAW,EACjCc,EAAeN,WAAaD,EAAe,CAC5CM,IAAaC,GACdxC,EAAKqC,IAAI,OAAQE,EAAYL","file":"bibcite.min.js"}
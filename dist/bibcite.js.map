{"version":3,"sources":["../src/parse-bibtex.js","../src/bibcite.js"],"names":[],"mappings":"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","file":"bibcite.js","sourcesContent":["// Original work by Henrik Muehe (c) 2010\n//\n// CommonJS port by Mikola Lysenko 2013\n//\n//\n\n// Issues:\n//  no comment handling within strings\n//  no string concatenation\n//  no variable values yet\n\n// Grammar implemented here:\n//  bibtex -> (string | preamble | comment | entry)*;\n//  string -> '@STRING' '{' key_equals_value '}';\n//  preamble -> '@PREAMBLE' '{' value '}';\n//  comment -> '@COMMENT' '{' value '}';\n//  entry -> '@' key '{' key ',' key_value_list '}';\n//  key_value_list -> key_equals_value (',' key_equals_value)*;\n//  key_equals_value -> key '=' value;\n//  value -> value_quotes | value_braces | key;\n//  value_quotes -> '\"' .*? '\"'; // not quite\n//  value_braces -> '{' .*? '\"'; // not quite\nfunction BibtexParser() {\n  this.pos = 0;\n  this.input = \"\";\n  \n  this.entries = {};\n  this.comments = [];\n  this.strings = {\n      JAN: \"January\",\n      FEB: \"February\",\n      MAR: \"March\",      \n      APR: \"April\",\n      MAY: \"May\",\n      JUN: \"June\",\n      JUL: \"July\",\n      AUG: \"August\",\n      SEP: \"September\",\n      OCT: \"October\",\n      NOV: \"November\",\n      DEC: \"December\"\n  };\n  this.currentKey = \"\";\n  this.currentEntry = \"\";\n  \n\n  this.setInput = function(t) {\n    this.input = t;\n  }\n  \n  this.getEntries = function() {\n      return this.entries;\n  }\n\n  this.isWhitespace = function(s) {\n    return (s == ' ' || s == '\\r' || s == '\\t' || s == '\\n');\n  }\n\n  this.match = function(s) {\n    this.skipWhitespace();\n    if (this.input.substring(this.pos, this.pos+s.length) == s) {\n      this.pos += s.length;\n    } else {\n      throw \"Token mismatch, expected \" + s + \", found \" + this.input.substring(this.pos);\n    }\n    this.skipWhitespace();\n  }\n\n  this.tryMatch = function(s) {\n    this.skipWhitespace();\n    if (this.input.substring(this.pos, this.pos+s.length) == s) {\n      return true;\n    } else {\n      return false;\n    }\n    this.skipWhitespace();\n  }\n\n  this.skipWhitespace = function() {\n    while (this.isWhitespace(this.input[this.pos])) {\n      this.pos++;\n    }\n    if (this.input[this.pos] == \"%\") {\n      while(this.input[this.pos] != \"\\n\") {\n        this.pos++;\n      }\n      this.skipWhitespace();\n    }\n  }\n\n  this.value_braces = function() {\n    var bracecount = 0;\n    this.match(\"{\");\n    var start = this.pos;\n    while(true) {\n      if (this.input[this.pos] == '}' && this.input[this.pos-1] != '\\\\') {\n        if (bracecount > 0) {\n          bracecount--;\n        } else {\n          var end = this.pos;\n          this.match(\"}\");\n          return this.input.substring(start, end);\n        }\n      } else if (this.input[this.pos] == '{') {\n        bracecount++;\n      } else if (this.pos == this.input.length-1) {\n        throw \"Unterminated value\";\n      }\n      this.pos++;\n    }\n  }\n\n  this.value_quotes = function() {\n    this.match('\"');\n    var start = this.pos;\n    while(true) {\n      if (this.input[this.pos] == '\"' && this.input[this.pos-1] != '\\\\') {\n          var end = this.pos;\n          this.match('\"');\n          return this.input.substring(start, end);\n      } else if (this.pos == this.input.length-1) {\n        throw \"Unterminated value:\" + this.input.substring(start);\n      }\n      this.pos++;\n    }\n  }\n  \n  this.single_value = function() {\n    var start = this.pos;\n    if (this.tryMatch(\"{\")) {\n      return this.value_braces();\n    } else if (this.tryMatch('\"')) {\n      return this.value_quotes();\n    } else {\n      var k = this.key();\n      if (this.strings[k.toUpperCase()]) {\n        return this.strings[k];\n      } else if (k.match(\"^[0-9]+$\")) {\n        return k;\n      } else {\n        throw \"Value expected:\" + this.input.substring(start);\n      }\n    }\n  }\n  \n  this.value = function() {\n    var values = [];\n    values.push(this.single_value());\n    while (this.tryMatch(\"#\")) {\n      this.match(\"#\");\n      values.push(this.single_value());\n    }\n    return values.join(\"\");\n  }\n\n  this.key = function() {\n    var start = this.pos;\n    while(true) {\n      if (this.pos == this.input.length) {\n        throw \"Runaway key\";\n      }\n    \n      if (this.input[this.pos].match(\"[a-zA-Z0-9_:\\\\./-]\")) {\n        this.pos++\n      } else {\n        return this.input.substring(start, this.pos).toUpperCase();\n      }\n    }\n  }\n\n  this.key_equals_value = function() {\n    var key = this.key();\n    if (this.tryMatch(\"=\")) {\n      this.match(\"=\");\n      var val = this.value();\n      return [ key, val ];\n    } else {\n      throw \"... = value expected, equals sign missing:\" + this.input.substring(this.pos);\n    }\n  }\n\n  this.key_value_list = function() {\n    var kv = this.key_equals_value();\n    this.entries[this.currentEntry][kv[0]] = kv[1];\n    while (this.tryMatch(\",\")) {\n      this.match(\",\");\n      // fixes problems with commas at the end of a list\n      if (this.tryMatch(\"}\")) {\n        break;\n      }\n      kv = this.key_equals_value();\n      this.entries[this.currentEntry][kv[0]] = kv[1];\n    }\n  }\n\n  this.entry_body = function(d) {\n    this.currentEntry = this.key();\n    this.entries[this.currentEntry] = { entryType: d.substring(1) };\n    this.match(\",\");\n    this.key_value_list();\n  }\n\n  this.directive = function () {\n    this.match(\"@\");\n    return \"@\"+this.key();\n  }\n\n  this.string = function () {\n    var kv = this.key_equals_value();\n    this.strings[kv[0].toUpperCase()] = kv[1];\n  }\n\n  this.preamble = function() {\n    this.value();\n  }\n\n  this.comment = function() {\n    var start = this.pos;\n    while(true) {\n      if (this.pos == this.input.length) {\n        throw \"Runaway comment\";\n      }\n    \n      if (this.input[this.pos] != '}') {\n        this.pos++\n      } else {\n        this.comments.push(this.input.substring(start, this.pos));\n        return;\n      }\n    }\n  }\n\n  this.entry = function(d) {\n    this.entry_body(d);\n  }\n\n  this.bibtex = function() {\n    while(this.tryMatch(\"@\")) {\n      var d = this.directive().toUpperCase();\n      this.match(\"{\");\n      if (d == \"@STRING\") {\n        this.string();\n      } else if (d == \"@PREAMBLE\") {\n        this.preamble();\n      } else if (d == \"@COMMENT\") {\n        this.comment();\n      } else {\n        this.entry(d);\n      }\n      this.match(\"}\");\n    }\n\n    this.entries['@comments'] = this.comments;\n  }\n}\n\n//Runs the parser\nfunction doParse(input) {\n  var b = new BibtexParser()\n  b.setInput(input)\n  b.bibtex()\n  return b.entries\n}\n\n// module.exports = doParse","\n// References and bibliography\n\nvar textohtml_map = {\n    \"\\\\\\\"u\": \"&uuml;\",\n    \"\\\\\\\"a\": \"&auml;\",\n    \"\\\\\\\"o\": \"&ouml;\",\n    \"\\\\'e\": \"&eacute;\",\n    \"\\\\'a\": \"&aacute;\",\n    \"\\\\\\\"U\": \"&Uuml;\",\n    \"\\\\\\\"A\": \"&Auml;\",\n    \"\\\\\\\"O\": \"&Ouml;\",\n    \"\\\\'E\": \"&Eacute;\",\n    \"\\\\'A\": \"&Aacute;\",\n    \"\\\\\\\"{u}\": \"&uuml;\",\n    \"\\\\\\\"{a}\": \"&auml;\",\n    \"\\\\\\\"{o}\": \"&ouml;\",\n    \"\\\\'{e}\": \"&eacute;\",\n    \"\\\\'{a}\": \"&aacute;\",\n    \"\\\\\\\"{U}\": \"&Uuml;\",\n    \"\\\\\\\"{A}\": \"&Auml;\",\n    \"\\\\\\\"{O}\": \"&Ouml;\",\n    \"\\\\'{E}\": \"&Eacute;\",\n    \"\\\\'{A}\": \"&Aacute;\",\n    \"\\\\&\": '&amp;'\n};\n\nfunction textohtml(tex) {\n    for (var key in textohtml_map) {\n        if (textohtml_map.hasOwnProperty(key)) {\n            tex = tex.replace(\"{\" + key + \"}\", textohtml_map[key]);\n            tex = tex.replace(key, textohtml_map[key]);\n        };\n    };\n    return tex;\n}\n\nfunction replace_html(rx, target) {\n    var matches = $('p').filter(function() {\n        return rx.test($(this).text())\n    })\n\n    $.each(matches, function() {\n        var html = $(this).html();\n        $(this).html(html.replace(rx, target))\n    });\n}\n\n// Keep track of the number of times each reference occurs\nvar referenceCounts = {}\nvar referenceCount = function(citation) {\n  var id = (typeof(citation) == 'string') ? citation : citation['_ID']\n  referenceCounts[id] = (referenceCounts[id] || 0) + 1\n  return referenceCounts[id];\n}\n\nvar parseAuthor = function(authorString) {\n  var authors = authorString.split(' and ');\n  return authors.map(function(author) {\n    var obj = { full: author }\n    var parts = author.split(', ')\n    obj.lastName = parts[0]\n\n    parts = parts[1].split(' ')\n    obj.firstName = parts[0]\n    obj.middleNames = parts.slice(1)\n\n    obj.initials = [obj.firstName[0]]\n    _(obj.middleNames).each(function(name) {\n      obj.initials.push(name[0])\n    })\n\n    return obj\n  })\n}\n\nvar formatAuthors = function(citation, all, initials) {\n  if(all == undefined) { all = false } // Show all authors\n  if(initials == undefined) { initials = false } // Show initials?\n\n  var authors = parseAuthor(citation['AUTHOR']).map(function(author) {\n    if(initials) {\n      return author.lastName + ', ' + author.initials.join('. ') + '.'\n    } else {\n      return author.lastName\n    }\n  });\n  \n  if(authors.length == 1) {\n    return authors[0]\n  } \n\n  else if((authors.length <= 5 && all == true) || (authors.length == 2)) {\n    return authors.slice(0,authors.length-1).join(', ')\n                + ' & ' + authors[authors.length-1];\n  } \n\n  else {\n    return authors[0] + ' et al.'\n  }\n}\n\nvar templates = {\n  fullArticle: _.template('<%= authors %> (<%= year %>). '\n                    +'<%= title %><%= title ? \".\" : \"\" %> '\n                    +'<em><%= journal %></em><%= journal ? \".\" : \"\" %> '\n                    +'<%= volume %><% if (number) { %><em>(<%= number %>)</em><% } %>'\n                    +'<%= (pages && volume ) ? \": \" : \"\" %><%= pages %><%= pages ? \".\" : \"\" %>'),\n  citep: _.template('(<%= before %><%= before ? \" \" : \"\" %>'\n                    +'<a href=\"#<%= id %>\" rel=\"footnote\"><%= authors %>, <%= year %></a>'\n                    +'<%= after ? \" \" : \"\" %><%= after %>)'),\n  citet: _.template('<a href=\"#<%= id %>\" rel=\"footnote\"><%= authors %> '\n                    +'(<%= before %><%= before ? \" \" : \"\" %><%= year %>'\n                    +'<%= after ? \" \" : \"\" %><%= after %>)</a>')\n}\n\nvar fnSelector = 'div.footnotes ol'\nvar fnCounter = 0;\n\nvar fullReference = function(id, citation, before, after) {\n  var $wrapper = $('<div id=\"'+id+'\" class=\"footnote-wrapper\"></div>')\n      .append($('<p></p>').html(before))\n      .append(fullcite(citation))\n      .append($('<p></p>').html(after))\n  return $('<div>').append($wrapper).html()\n}\n\nvar citep = function(citation, before, after) {\n  var count = referenceCount(citation);\n  fnCounter++;\n  var id = 'footcite-'+fnCounter\n  var content = templates.citep({ \n    authors: formatAuthors(citation, count % 5 == 1, false),\n    year: citation['YEAR'],\n    count: count,\n    id: id,\n    before: before,\n    after: after\n  })\n  return content + fullReference(id, citation)\n}\n\nvar citet = function(citation, before, after) {\n  var count = referenceCount(citation);\n  fnCounter++;\n  var id = 'footcite-'+fnCounter\n  var content = templates.citet({ \n    authors: formatAuthors(citation, count % 5 == 1, false),\n    year: citation['YEAR'],\n    count: count,\n    id: id,\n    before: before,\n    after: after\n  })\n  return content + fullReference(id, citation)\n}\n\nvar footcite = function(citation, before, after) {\n  fnCounter ++;\n  var id = 'footcite-' + fnCounter\n  var ref = '<sup class=\"footnote\"><a href=\"#'+id+'\" rel=\"footnote\">' + fnCounter +'</a></sup>'\n  return ref + fullReference(id, citation, before, after)\n}\n\nvar fullcite = function(citation, before, after) {\n  return templates.fullArticle({ \n    authors: formatAuthors(citation, true, false),\n    year: citation['YEAR'],\n    title: citation['TITLE'].slice(1, citation['TITLE'].length-2),\n    journal: citation['JOURNAL'],\n    volume: citation['VOLUME'],\n    number: citation['NUMBER'],\n    pages: citation['PAGES'].replace('--','&ndash;')\n  }) \n}\n\nvar updateReference = function(citation, citation_id) {\n  // Matches\n  // @key --> normal inline citation, e.g. Author1, Author2 (2015)\n  // @(key) --> parenthisized citation, e.g. (Author1, Author2, 2015)\n  // @^key --> footnote citation\n  // @@key --> full citation\n  // var expr = new RegExp('@([@\\\\^\\\\(]?)' + citation_id + '\\\\)?(\\\\[(.[^\\\\[]*)\\\\](\\\\[(.[^\\\\[]*)\\\\])?)?\\\\W', 'ig')\n  var expr = new RegExp('@(.)?' + citation_id, 'i')\n  var matches = $('p').filter(function() {\n      return expr.test($(this).text())\n  })\n  \n  var expr = new RegExp('@(.)?' + citation_id + '\\\\)?(\\\\[.*\\\\])*', 'gi')\n  $.each(matches, function() {\n      var html = $(this).html();\n      var newHtml = html.replace(expr, function(match, type, beforeAfter){\n        var type = '' || type, \n            before = '', \n            after = '', \n            fn = citet;\n        \n        if(beforeAfter) {\n          beforeAfter = beforeAfter.slice(1, beforeAfter.length-1).split('][')\n          before = beforeAfter[0]\n          after = beforeAfter[1] || ''\n        }\n\n        if(type == '(') { fn = citep }\n        else if(type == '^') { fn = footcite }\n        else if(type == '@') { fn = fullcite }\n        return fn(citation, before, after)\n      })\n\n      $(this).html(textohtml(newHtml))\n  });\n}\n\n$(function() {\n    $.get(\"/assets/bibliography.bib\", function(bibtext) {\n        $(function() {\n            var bibs = doParse(bibtext);\n            _(bibs).each(function(citation, citation_id) {\n                citation['_ID'] = citation_id\n                updateReference(citation, citation_id)\n            });\n\n            $('.footnote-wrapper').each(function(i, el){\n              var $el = $(el);\n              var $content = $('<div class=\"content\"></div>').html($el.html())\n              var $tip  = $('<div class=\"tip\"></div>')\n              $el.empty().append($content).prepend($tip);\n            })\n\n            $(\"a[rel='footnote'], a.footnote\").map(function(i, el) {\n              var $ref = $(el)\n              var $content = $($ref.attr('href'))\n\n              $ref.on('click', function(e) {\n                e.preventDefault()\n                var href = $ref.attr('href')\n                var $content = $(href)\n                var active = $content.hasClass('active')\n                \n                if(!active) {\n                  $('.footnote-wrapper.active').each(function() {\n                    var $this = $(this);\n                    $this.removeClass('visible')\n                    $this.data('timeout', setTimeout(function() {\n                      $this.removeClass('active')\n                    }, 300))\n                  })\n\n                  $content.addClass('active')\n                  clearTimeout($content.data('timeout'))\n                  $content.data('timeout', setTimeout(function() {\n                    $content.addClass('visible')\n                  }, 10))\n\n                  // Insert two probes around the ref to determine the\n                  // right position of the tooltip\n                  var $beginProbe = $('<i>').insertBefore($ref).addClass('probe');\n                  var beginPos = $beginProbe.position();\n                  var $endProbe = $('<i>').insertAfter($ref).addClass('probe');\n                  var endPos = $endProbe.position();\n                  $endProbe.remove();\n                  $beginProbe.remove();\n                  \n                  // Different reference positions for references spanning multiple lines\n                  if((endPos.top - beginPos.top > 10) && beginPos.top >= 0) {\n                    refWidth = endPos.left\n                    refLeft  = 0;\n                    refTop = beginPos.top + $ref.height()\n                  } else {\n                    refWidth = $ref.width()\n                    refLeft = beginPos.left\n                    refTop = endPos.top + $ref.height()\n                  }\n\n                  // Position content of tooltip\n                  var totalWidth = $('main').width(),\n                      contentWidth = $content.width();\n                  if(refLeft > totalWidth - contentWidth / 2) {\n                    // Position all the way to the right\n                    targetLeft = totalWidth - contentWidth\n                  } else {\n                    // Center under reference\n                    targetLeft = refLeft - (contentWidth - refWidth) / 2\n                    targetLeft = Math.max(0, targetLeft)\n                  }\n                  $content.css({ left: targetLeft, top: refTop})\n\n                  // position tip\n                  var $tip = $content.find('.tip'),\n                      refCenter = refLeft + refWidth / 2,\n                      targetCenter = targetLeft + contentWidth / 2;\n                  if(refCenter != targetCenter) {\n                    $tip.css('left', refCenter - targetLeft) \n                  }\n                } else {\n                  $content.removeClass('visible')\n                  $content.data('timeout', setTimeout(function() {\n                    $content.removeClass('active')\n                  }, 300))\n                }\n              })\n            })\n        });\n    })\n\n})"]}
{"version":3,"sources":["../src/parse-bibtex.js","../src/citation.js","../src/bibcite.js"],"names":[],"mappings":"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","file":"bibcite.js","sourcesContent":["// Original work by Henrik Muehe (c) 2010\n//\n// CommonJS port by Mikola Lysenko 2013\n//\n//\n\n// Issues:\n//  no comment handling within strings\n//  no string concatenation\n//  no variable values yet\n\n// Grammar implemented here:\n//  bibtex -> (string | preamble | comment | entry)*;\n//  string -> '@STRING' '{' key_equals_value '}';\n//  preamble -> '@PREAMBLE' '{' value '}';\n//  comment -> '@COMMENT' '{' value '}';\n//  entry -> '@' key '{' key ',' key_value_list '}';\n//  key_value_list -> key_equals_value (',' key_equals_value)*;\n//  key_equals_value -> key '=' value;\n//  value -> value_quotes | value_braces | key;\n//  value_quotes -> '\"' .*? '\"'; // not quite\n//  value_braces -> '{' .*? '\"'; // not quite\nfunction BibtexParser() {\n  this.pos = 0;\n  this.input = \"\";\n  \n  this.entries = {};\n  this.comments = [];\n  this.strings = {\n      JAN: \"January\",\n      FEB: \"February\",\n      MAR: \"March\",      \n      APR: \"April\",\n      MAY: \"May\",\n      JUN: \"June\",\n      JUL: \"July\",\n      AUG: \"August\",\n      SEP: \"September\",\n      OCT: \"October\",\n      NOV: \"November\",\n      DEC: \"December\"\n  };\n  this.currentKey = \"\";\n  this.currentEntry = \"\";\n  \n\n  this.setInput = function(t) {\n    this.input = t;\n  }\n  \n  this.getEntries = function() {\n      return this.entries;\n  }\n\n  this.isWhitespace = function(s) {\n    return (s == ' ' || s == '\\r' || s == '\\t' || s == '\\n');\n  }\n\n  this.match = function(s) {\n    this.skipWhitespace();\n    if (this.input.substring(this.pos, this.pos+s.length) == s) {\n      this.pos += s.length;\n    } else {\n      throw \"Token mismatch, expected \" + s + \", found \" + this.input.substring(this.pos);\n    }\n    this.skipWhitespace();\n  }\n\n  this.tryMatch = function(s) {\n    this.skipWhitespace();\n    if (this.input.substring(this.pos, this.pos+s.length) == s) {\n      return true;\n    } else {\n      return false;\n    }\n    this.skipWhitespace();\n  }\n\n  this.skipWhitespace = function() {\n    while (this.isWhitespace(this.input[this.pos])) {\n      this.pos++;\n    }\n    if (this.input[this.pos] == \"%\") {\n      while(this.input[this.pos] != \"\\n\") {\n        this.pos++;\n      }\n      this.skipWhitespace();\n    }\n  }\n\n  this.value_braces = function() {\n    var bracecount = 0;\n    this.match(\"{\");\n    var start = this.pos;\n    while(true) {\n      if (this.input[this.pos] == '}' && this.input[this.pos-1] != '\\\\') {\n        if (bracecount > 0) {\n          bracecount--;\n        } else {\n          var end = this.pos;\n          this.match(\"}\");\n          return this.input.substring(start, end);\n        }\n      } else if (this.input[this.pos] == '{') {\n        bracecount++;\n      } else if (this.pos == this.input.length-1) {\n        throw \"Unterminated value\";\n      }\n      this.pos++;\n    }\n  }\n\n  this.value_quotes = function() {\n    this.match('\"');\n    var start = this.pos;\n    while(true) {\n      if (this.input[this.pos] == '\"' && this.input[this.pos-1] != '\\\\') {\n          var end = this.pos;\n          this.match('\"');\n          return this.input.substring(start, end);\n      } else if (this.pos == this.input.length-1) {\n        throw \"Unterminated value:\" + this.input.substring(start);\n      }\n      this.pos++;\n    }\n  }\n  \n  this.single_value = function() {\n    var start = this.pos;\n    if (this.tryMatch(\"{\")) {\n      return this.value_braces();\n    } else if (this.tryMatch('\"')) {\n      return this.value_quotes();\n    } else {\n      var k = this.key();\n      if (this.strings[k.toUpperCase()]) {\n        return this.strings[k];\n      } else if (k.match(\"^[0-9]+$\")) {\n        return k;\n      } else {\n        throw \"Value expected:\" + this.input.substring(start);\n      }\n    }\n  }\n  \n  this.value = function() {\n    var values = [];\n    values.push(this.single_value());\n    while (this.tryMatch(\"#\")) {\n      this.match(\"#\");\n      values.push(this.single_value());\n    }\n    return values.join(\"\");\n  }\n\n  this.key = function() {\n    var start = this.pos;\n    while(true) {\n      if (this.pos == this.input.length) {\n        throw \"Runaway key\";\n      }\n    \n      if (this.input[this.pos].match(\"[a-zA-Z0-9_:\\\\./-]\")) {\n        this.pos++\n      } else {\n        return this.input.substring(start, this.pos).toUpperCase();\n      }\n    }\n  }\n\n  this.key_equals_value = function() {\n    var key = this.key();\n    if (this.tryMatch(\"=\")) {\n      this.match(\"=\");\n      var val = this.value();\n      return [ key, val ];\n    } else {\n      throw \"... = value expected, equals sign missing:\" + this.input.substring(this.pos);\n    }\n  }\n\n  this.key_value_list = function() {\n    var kv = this.key_equals_value();\n    this.entries[this.currentEntry][kv[0]] = kv[1];\n    while (this.tryMatch(\",\")) {\n      this.match(\",\");\n      // fixes problems with commas at the end of a list\n      if (this.tryMatch(\"}\")) {\n        break;\n      }\n      kv = this.key_equals_value();\n      this.entries[this.currentEntry][kv[0]] = kv[1];\n    }\n  }\n\n  this.entry_body = function(d) {\n    this.currentEntry = this.key();\n    this.entries[this.currentEntry] = { entryType: d.substring(1) };\n    this.match(\",\");\n    this.key_value_list();\n  }\n\n  this.directive = function () {\n    this.match(\"@\");\n    return \"@\"+this.key();\n  }\n\n  this.string = function () {\n    var kv = this.key_equals_value();\n    this.strings[kv[0].toUpperCase()] = kv[1];\n  }\n\n  this.preamble = function() {\n    this.value();\n  }\n\n  this.comment = function() {\n    var start = this.pos;\n    while(true) {\n      if (this.pos == this.input.length) {\n        throw \"Runaway comment\";\n      }\n    \n      if (this.input[this.pos] != '}') {\n        this.pos++\n      } else {\n        this.comments.push(this.input.substring(start, this.pos));\n        return;\n      }\n    }\n  }\n\n  this.entry = function(d) {\n    this.entry_body(d);\n  }\n\n  this.bibtex = function() {\n    while(this.tryMatch(\"@\")) {\n      var d = this.directive().toUpperCase();\n      this.match(\"{\");\n      if (d == \"@STRING\") {\n        this.string();\n      } else if (d == \"@PREAMBLE\") {\n        this.preamble();\n      } else if (d == \"@COMMENT\") {\n        this.comment();\n      } else {\n        this.entry(d);\n      }\n      this.match(\"}\");\n    }\n\n    this.entries['@comments'] = this.comments;\n  }\n}\n\n//Runs the parser\nfunction doParse(input) {\n  var b = new BibtexParser()\n  b.setInput(input)\n  b.bibtex()\n  return b.entries\n}\n\n// module.exports = doParse","var CitationStyle = function() {\n\tif (!(this instanceof CitationStyle)) return new CitationStyle();\n\tthis.footnote = 0;\n}\n\nCitationStyle.prototype.formatAuthors = function(citation, all, initials) {\n\tif(all == undefined) { all = false } // Show all authors\n\tif(initials == undefined) { initials = false } // Show initials?\n\n\tvar authors = citation.get('author').map(function(author) {\n\t\tif(initials) {\n\t\t  return author.lastName + ', ' + author.initials.join('. ') + '.'\n\t\t} else {\n\t\t  return author.lastName\n\t\t}\n\t});\n\n\tif(authors.length == 1) {\n\t\treturn authors[0]\n\t} \n\n\telse if((authors.length <= 5 && all == true) || (authors.length == 2)) {\n\t\treturn authors.slice(0,authors.length-1).join(', ')\n\t            + ' & ' + authors[authors.length-1];\n\t} \n\n\telse {\n\t\treturn authors[0] + ' et al.'\n\t}\n}\n\nCitationStyle.prototype.templates = {\n  fullArticle: _.template('<%= author %> (<%= year %>). '\n                    +'<%= title %><%= title ? \".\" : \"\" %> '\n                    +'<em><%= journal %></em><%= journal ? \".\" : \"\" %> '\n                    +'<%= volume %><% if (number) { %><em>(<%= number %>)</em><% } %>'\n                    +'<%= (pages && volume ) ? \": \" : \"\" %><%= pages %><%= pages ? \".\" : \"\" %>'),\n\n  fullArticle: _.template('<%= author %> (<%= year %>). '\n                    +'<em><%= title %><%= title ? \".\" : \"\" %></em> '\n                    +'<%= address %><%= address ? \":\" : \"\" %> '\n                    +'<%= publisher %>.'),\n  \n  citep: _.template('(<%= before %><%= before ? \" \" : \"\" %>'\n                    +'<a href=\"#<%= footnoteId %>\" rel=\"footnote\"><%= author %>, <%= year %></a>'\n                    +'<%= after ? \" \" : \"\" %><%= after %>)'),\n  \n  citet: _.template('<a href=\"#<%= footnoteId %>\" rel=\"footnote\"><%= author %> '\n                    +'(<%= before %><%= before ? \" \" : \"\" %><%= year %>'\n                    +'<%= after ? \" \" : \"\" %><%= after %>)</a>')\n}\n\nCitationStyle.prototype.nextFn = function() {\n\tthis.footnote++;\n\treturn this.footnote;\n}\n\nCitationStyle.prototype.export = function(citation, context) {\n\tvar properties = ['author', 'year', 'title', 'journal', 'volume', \n\t\t'number', 'pages', 'address', 'publisher'];\n\tvar obj = {}\n\tfor(i in properties) {\n\t\tvar prop = properties[i];\n\t\tswitch(prop) {\n\n\t\t\tcase 'author':\n\t\t\t\tswitch(context) {\n\t\t\t\t\tcase 'reference':\n\t\t\t\t\t\tval = this.formatAuthors(citation, true, false);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'inline':\n\t\t\t\t\t\tval = this.formatAuthors(citation, false, false);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase 'title':\n\t\t\t\tvar title = citation.get('title');\n\t\t\t\tval = title.slice(1, title.length - 2);\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tval = citation.get(prop);\n\t\t}\n\t\tobj[prop] = val || '';\n\t}\n\n\tobj.id = citation.id;\n\tobj.footnote = this.nextFn()\n\tobj.footnoteId = 'bibcite-' + obj.footnote\n\n\treturn obj\n}\n\nCitationStyle.prototype.render = function(template, context, citation, before, after) {\n\tvar obj = this.export(citation, context)\n\tobj.before = before;\n\tobj.after = after;\n\treturn this.templates[template](obj)\n}\n\nCitationStyle.prototype.citep = function(citation, before, after) {\n\treturn this.render('citep', 'inline', citation, before, after)\n}\n\nCitationStyle.prototype.citet = function(citation, before, after) {\n\treturn this.render('citet', 'inline', citation, before, after)\n}\n\nCitationStyle.prototype.reference = function(citation, before, after) {\n\tswitch(citation.get('entryType')) {\n\t\tcase 'BOOK':\n\t\t\treturn this.render('fullBook', 'reference', citation, before, after);\n\t\tdefault:\n\t\t\treturn this.render('fullArticle', 'reference', citation, before, after);\n\t}\n}\n\n// var fnSelector = 'div.footnotes ol'\n// var fnCounter = 0;\n// CitationStyle.prototype.reference = function(citation, before, after) {\n// \t// var fn = this.nextFn()\n// \t// var id = 'footcite-' + fn\n// \t// var ref = '<sup class=\"footnote\"><a href=\"#'+id+'\" rel=\"footnote\">' + fn +'</a></sup>'\n// \t// return ref + fullReference(id, citation, before, after)\n// \t// \n// \t// \n// \treturn templates.fullArticle({ \n// \t\tauthors: formatAuthors(citation, true, false),\n// \t\tyear: citation['YEAR'],\n// \t\ttitle: citation['TITLE'].slice(1, citation['TITLE'].length-2),\n// \t\tjournal: citation['JOURNAL'],\n// \t\tvolume: citation['VOLUME'],\n// \t\tnumber: citation['NUMBER'],\n// \t\tpages: citation['PAGES'].replace('--','&ndash;')\n// \t})\n// }\n\n// var citep = function(citation, before, after) {\n//   var count = referenceCount(citation);\n//   fnCounter++;\n//   var id = 'footcite-'+fnCounter\n//   var content = templates.citep({ \n//     authors: formatAuthors(citation, count % 5 == 1, false),\n//     year: citation['YEAR'],\n//     count: count,\n//     id: id,\n//     before: before,\n//     after: after\n//   })\n//   return content + fullReference(id, citation)\n// }\n\n// var citet = function(citation, before, after) {\n//   var count = referenceCount(citation);\n//   fnCounter++;\n//   var id = 'footcite-'+fnCounter\n//   var content = templates.citet({ \n//     authors: formatAuthors(citation, count % 5 == 1, false),\n//     year: citation['YEAR'],\n//     count: count,\n//     id: id,\n//     before: before,\n//     after: after\n//   })\n//   return content + fullReference(id, citation)\n// }\n\n// var footcite = function(citation, before, after) {\n//   fnCounter ++;\n//   var id = 'footcite-' + fnCounter\n//   var ref = '<sup class=\"footnote\"><a href=\"#'+id+'\" rel=\"footnote\">' + fnCounter +'</a></sup>'\n//   return ref + fullReference(id, citation, before, after)\n// }\n\n// var fullcite = function(citation, before, after) {\n//   return templates.fullArticle({ \n//     authors: formatAuthors(citation, true, false),\n//     year: citation['YEAR'],\n//     title: citation['TITLE'].slice(1, citation['TITLE'].length-2),\n//     journal: citation['JOURNAL'],\n//     volume: citation['VOLUME'],\n//     number: citation['NUMBER'],\n//     pages: citation['PAGES'].replace('--','&ndash;')\n//   }) \n// }","var BibCite = function(bibfile, settings) {\n    if (!(this instanceof BibCite)) return new BibCite(settings);\n\n    this.settings = _.defaults(settings, {\n        bibfile: bibfile\n    })\n\n    this.style = new CitationStyle()\n\n    this.bibliography = {}\n    var self = this;\n    $.get(bibfile, function(bibtext) {\n        var bibs = doParse(bibtext);\n        for (id in bibs) {\n            if (id == '@comments') continue;\n            var citation = new Citation(id, bibs[id])\n            self.bibliography[id] = citation\n            console.log(self.style.citep(citation))\n            console.log(self.style.citet(citation))\n            console.log(self.style.reference(citation))\n        }\n    });\n}\n\nBibCite.prototype.updateCitation = function(citation) {\n\n}\n\n\nvar Citation = function(id, bib) {\n    if (!(this instanceof Citation)) return new Citation(citation_id, citation);\n\n    this.id = id\n    this.bib = bib\n    this.parseAuthor();\n\n}\n\nCitation.prototype.get = function(property) {\n    if (property in this) {\n        return this[property]\n    } else if (property.toUpperCase() in this.bib) {\n        return this.bib[property.toUpperCase()]\n    } else {\n        return false\n    }\n}\n\nCitation.prototype.parseAuthor = function() {\n    var authorString = this.get('author');\n    if (!authorString) { return false; }\n\n    var authors = authorString.split(' and ');\n    this.author = authors.map(function(author) {\n        var obj = { full: author }\n        var parts = author.split(', ')\n        obj.lastName = parts[0]\n\n        parts = parts[1].split(' ')\n        obj.firstName = parts[0]\n        obj.middleNames = parts.slice(1)\n\n        obj.initials = [obj.firstName[0]]\n        $(obj.middleNames).each(function(name) {\n            obj.initials.push(name[0])\n        })\n\n        return obj\n    })\n}"]}